<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Profile</title>
	<link rel="stylesheet" href="../css/post.css">
	<link rel="stylesheet" href="../css/profile.css">
	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body data-category="Profile">

<nav class="topbar">
	<div class="logo">APCommunity</div>
	<ul>
		<li><a href="general.html" class="tab-link active" data-category="general">General</a></li>
		<li><a href="academic.html" class="tab-link" data-category="academic">Academic</a></li>
		<li><a href="culture.html" class="tab-link" data-category="culture">Cultural</a></li>
		<li><a href="art.html" class="tab-link" data-category="art">Art</a></li>
		<li><a href="sport.html" class="tab-link" data-category="sport">Sport</a></li>
	</ul>
	<div class="profile-info" id="profileInfo">
		<img src="../image/AsiaPacificUniversityOfTechnologyInnovation.webp" alt="Profile" class="profile-pic" />
		<div class="profile-details">
			<span class="profile-username">Asia Pacific University</span>
			<span class="profile-desc">APU</span>
		</div>
		<a class="logout-link" onclick="logout()">Log out</a>
		<script>
			function logout()
			{
				if (confirm("Are you sure you want to log out?")) {
					localStorage.setItem("isLoggedIn", "false");
					deleteUserData("currentUserIndex").then(r => {
						console.log(r);
						window.location.href = "register_login.html";
					});
				}
			}
		</script>
	</div>
</nav>


<div class="container">
	<!-- Left Sidebar -->
	<aside class="sidebar-left">
		<!-- Put your sidebar content here -->
		<a href="general.html" class="menu-item tab-link" data-category="general">
			<i class="uil uil-envelope-alt"></i> Home
		</a>
		<div class="menu-item"><i class="uil uil-compass"></i> Explore</div>
		<a href="notification.html" class="menu-item tab-link" data-category="notification">
			<i class="uil uil-envelope-alt"></i> Notification
		</a>
		<a href="posting.html" class="menu-item tab-link" data-category="posting">
			<i class="uil uil-envelope-alt"></i> Add a Post
		</a>
		<div class="menu-item"><i class="uil uil-bookmark"></i> Bookmark</div>
		<div class="menu-item active"><i class="uil uil-home"></i> Profile</div>
		<a href="setting.html" class="menu-item tab-link" data-category="setting">
			<i class="uil uil-envelope-alt"></i> Setting
		</a>
	</aside>
	
	
	<!-- Main Feed -->
	<main class="main-feed" id="postFeed">
		<!--display profile card-->
		<div class="profile-card">
			<div class="profile-body">
				<div class="profile-content">
					<div class="profile-user-info">
						<h1 id="username"><img src="../image/AsiaPacificUniversityOfTechnologyInnovation.webp" alt="userProfile">User_0</h1>
					</div>
					<div class="profile-detail">
						<ul class="card-selection">
							<li>
								<p id="Name">Name:</p>
								<label>
									<input type="text" id="NameText" size="50" disabled placeholder="Name">
								</label>
							</li>
							<li>
								<p id="Gender">Gender:</p>
								<label>
									<input type="text" id="GenderText" size="50" disabled placeholder="Gender" >
								</label>
							</li>
							<li>
								<p id="Address">Address:</p>
								<label>
									<input type="text" id="AddressText" size="50" disabled placeholder="Address">
								</label>
							</li>
							<li>
								<p id="Phone">Phone:</p>
								<label>
									<input type="text" id="PhoneText" size="50" disabled placeholder="Phone">
								</label>
							</li>
						</ul>
					</div>
					<div class="profile-edit-button">
						<button id="profile-edit-button" onclick=edit()>Edit Details</button>
					</div>
				</div>
			</div>
			
			<!--display quick-access-card-->
			<div class="quick-access-card">
				<div class="quick-access-content">
					<div class="quick-access-info">
						<h1>Quick Access</h1>
					</div>
					<div class="profile-detail">
						<div class="quick-access-content-button" onclick=APSpace()>
							<img src="../image/APSpace.png" alt="">
						</div>
						<div class="quick-access-content-button" onclick=Moodle()>
							<img src="../image/Moodle-logo.png" alt="">
						</div>
						<div class="quick-access-content-button" onclick=Favorite()>
							<img src="../image/favorite.png" alt="">
						</div>
						<script>
							function APSpace()
							{
								window.location.href = "https://apspace.apu.edu.my/";
							}
							function Moodle()
							{
								window.location.href = "https://lms2.apiit.edu.my/";
							}
							function Favorite()
							{
								window.location.href = "./Favorite.html";
							}
						</script>
					</div>
				</div>
			</div>
		</div>
	</main>
	
	
	<!-- Right Sidebar -->
	<aside class="sidebar-right">
		<h4>Suggested for you</h4>
		<ul class="suggestions">
			<li>User_1 <button class="follow-btn" id="follow-btn_1" onclick=Follow_1()>Follow</button></li>
			<li>User_2 <button class="follow-btn" id="follow-btn_2" onclick=Follow_2()>Follow</button></li>
			<li>User_3 <button class="follow-btn" id="follow-btn_3" onclick=Follow_3()>Follow</button></li>
			<script>
				function Follow_1() {
					const button = document.querySelector('#follow-btn_1');
					button.innerHTML = button.innerHTML === 'Follow' ? 'Following' : 'Follow';
				}
				function Follow_2() {
					const button = document.querySelector('#follow-btn_2');
					button.innerHTML = button.innerHTML === 'Follow' ? 'Following' : 'Follow';
				}
				function Follow_3() {
					const button = document.querySelector('#follow-btn_3');
					button.innerHTML = button.innerHTML === 'Follow' ? 'Following' : 'Follow';
				}
			</script>
		</ul>
	</aside>


</div>
<div id="imageModal" class="image-modal" style="display:none;">
	<span class="close-modal">&times;</span>
	<img class="modal-content" id="modalImg" src="" alt="Full View">
</div>


<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
<script type="module" src="../js/profile.js"></script>
<script type="module">
	import { getDataByIndex } from "../js/indexedDb.js";
	const profileUsername = document.querySelector(".profile-username");
	const username = document.querySelector("#username");
	const currentUsername = await getDataByIndex("userDB", "userObjectStore", "currentUserIndex");
	console.log(currentUsername[0].currentUser);
	profileUsername.textContent = currentUsername[0].currentUser;
	username.innerHTML = `<img src="../image/AsiaPacificUniversityOfTechnologyInnovation.webp" alt="userProfile">${currentUsername[0].currentUser}'s Details`;
</script>

</body>
</html>